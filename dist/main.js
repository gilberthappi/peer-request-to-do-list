(()=>{const e=document.getElementById("listItems"),t=document.getElementById("newItem"),n=document.getElementById("clearCompleted");let d=JSON.parse(localStorage.getItem("storedData"))||[];function i(e){localStorage.setItem("storedData",JSON.stringify(e))}function a(){e.innerHTML="",d.sort(((e,t)=>e.index-t.index)).forEach((t=>{!function(t){const n=`\n    <li class="item" data-index=${t.index}>\n      <input ${t.completed?"checked":""} type="checkbox" class="checkBox" data-index=${t.index}>\n      <p contenteditable class="toDoText ${t.completed?"checked":""}" data-index=${t.index}>${t.description}</p>\n      <button class="deleteBtn" data-index=${t.index}><i class="far fa-trash-alt"></i></button>\n    </li>\n  `;e.innerHTML+=n}(t)}))}document.querySelector("form").addEventListener("submit",(e=>{e.preventDefault();const n=t.value.trim();""!==n&&(function(e){const t={description:e,completed:!1,index:d.length+1};d.push(t),i(d),a()}(n),t.value="")})),e.addEventListener("click",(e=>{e.target.classList.contains("deleteBtn")&&function(e){const t=d.findIndex((t=>t.index===e));-1!==t&&(d.splice(t,1),d.forEach(((e,t)=>{e.index=t+1})),i(d),a())}(parseInt(e.target.dataset.index,10))})),e.addEventListener("input",(e=>{e.target.classList.contains("toDoText")&&function(e,t){const n=d.findIndex((t=>t.index===e));-1!==n&&(d[n].description=t,i(d))}(parseInt(e.target.dataset.index,10),e.target.textContent.trim())})),e.addEventListener("change",(e=>{if(e.target.classList.contains("checkBox")){const t=parseInt(e.target.dataset.index,10),n=d.findIndex((e=>e.index===t));-1!==n&&(d[n].completed=e.target.checked,i(d),a())}})),n.addEventListener("click",(()=>{d=d.filter((e=>!e.completed)),d.forEach(((e,t)=>{e.index=t+1})),i(d),a()})),a()})();